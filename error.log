{"level":"error","message":"Error initializing event: Cannot read properties of undefined (reading 'insert')","stack":"TypeError: Cannot read properties of undefined (reading 'insert')\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:20:9\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at Object.initializeEvent (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:77)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:15:38\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:41:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:37:12)\n    at initializeEvent (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:12:90)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at validate (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\middleware\\validation.ts:27:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at middleware (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-02-10T10:09:45.335Z"}
{"level":"error","message":"Error booking ticket: trx is not a function","stack":"TypeError: trx is not a function\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:18:25\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:17:39\n    at Function.<anonymous> (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\tests\\integration\\evenRoutes.test.ts:61:66)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:397:39\n    at Function.<anonymous> (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:404:13)\n    at Function.mockConstructor (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:148:19)\n    at Function.value [as transaction] (eval at _createMockFunction (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:566:31), <anonymous>:3:51)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:17:13\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at Object.bookTicket (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:16:69)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:26:39\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:41:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:37:12)\n    at bookTicket (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:23:85)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at validate (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\middleware\\validation.ts:27:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at middleware (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-02-10T10:09:45.463Z"}
{"level":"error","message":"Error booking ticket: trx is not a function","stack":"TypeError: trx is not a function\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:18:25\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:17:39\n    at Function.<anonymous> (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\tests\\integration\\evenRoutes.test.ts:80:66)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:397:39\n    at Function.<anonymous> (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:404:13)\n    at Function.mockConstructor (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:148:19)\n    at Function.value [as transaction] (eval at _createMockFunction (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:566:31), <anonymous>:3:51)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:17:13\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at Object.bookTicket (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:16:69)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:26:39\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:41:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:37:12)\n    at bookTicket (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:23:85)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at validate (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\middleware\\validation.ts:27:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at middleware (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-02-10T10:09:45.499Z"}
{"level":"error","message":"Error booking ticket: trx is not a function","stack":"TypeError: trx is not a function\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:18:25\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:17:39\n    at Function.<anonymous> (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\tests\\integration\\evenRoutes.test.ts:97:66)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:397:39\n    at Function.<anonymous> (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:404:13)\n    at Function.mockConstructor (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:148:19)\n    at Function.value [as transaction] (eval at _createMockFunction (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:566:31), <anonymous>:3:51)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:17:13\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at Object.bookTicket (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:16:69)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:26:39\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:41:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:37:12)\n    at bookTicket (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:23:85)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at validate (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\middleware\\validation.ts:27:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at middleware (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-02-10T10:09:45.534Z"}
{"level":"error","message":"Error cancelling booking: trx is not a function","stack":"TypeError: trx is not a function\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:41:27\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:40:39\n    at Function.<anonymous> (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\tests\\integration\\evenRoutes.test.ts:120:66)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:397:39\n    at Function.<anonymous> (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:404:13)\n    at Function.mockConstructor (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:148:19)\n    at Function.value [as transaction] (eval at _createMockFunction (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:566:31), <anonymous>:3:51)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:40:13\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at Object.cancelBooking (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:39:72)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:41:39\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:41:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:37:12)\n    at cancelBooking (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:38:88)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at validate (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\middleware\\validation.ts:27:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at middleware (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-02-10T10:09:45.567Z"}
{"level":"error","message":"Error cancelling booking: trx is not a function","stack":"TypeError: trx is not a function\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:41:27\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:40:39\n    at Function.<anonymous> (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\tests\\integration\\evenRoutes.test.ts:136:66)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:397:39\n    at Function.<anonymous> (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:404:13)\n    at Function.mockConstructor (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:148:19)\n    at Function.value [as transaction] (eval at _createMockFunction (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:566:31), <anonymous>:3:51)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:40:13\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at Object.cancelBooking (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:39:72)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:41:39\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:41:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:37:12)\n    at cancelBooking (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:38:88)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at validate (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\middleware\\validation.ts:27:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at middleware (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-02-10T10:09:45.597Z"}
{"level":"error","message":"Error getting event status: Cannot read properties of undefined (reading 'where')","stack":"TypeError: Cannot read properties of undefined (reading 'where')\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:72:35\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at Object.getEventStatus (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:71:57)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:56:39\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:41:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:37:12)\n    at getEventStatus (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:53:89)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at validate (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\middleware\\validation.ts:27:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at middleware (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-02-10T10:09:45.642Z"}
{"level":"error","message":"Error getting event status: Cannot read properties of undefined (reading 'where')","stack":"TypeError: Cannot read properties of undefined (reading 'where')\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:72:35\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at Object.getEventStatus (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:71:57)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:56:39\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:41:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:37:12)\n    at getEventStatus (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:53:89)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at validate (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\middleware\\validation.ts:27:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at middleware (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-02-10T10:09:45.673Z"}
{"level":"error","message":"Error initializing event: Cannot read properties of undefined (reading 'insert')","stack":"TypeError: Cannot read properties of undefined (reading 'insert')\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:20:9\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at Object.initializeEvent (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:77)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:15:38\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:41:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:37:12)\n    at initializeEvent (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:12:90)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at validate (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\middleware\\validation.ts:27:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at middleware (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-02-10T10:12:09.274Z"}
{"level":"error","message":"Error booking ticket: trx is not a function","stack":"TypeError: trx is not a function\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:18:25\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:17:39\n    at Function.<anonymous> (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\tests\\integration\\evenRoutes.test.ts:61:66)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:397:39\n    at Function.<anonymous> (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:404:13)\n    at Function.mockConstructor (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:148:19)\n    at Function.value [as transaction] (eval at _createMockFunction (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:566:31), <anonymous>:3:51)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:17:13\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at Object.bookTicket (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:16:69)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:26:39\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:41:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:37:12)\n    at bookTicket (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:23:85)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at validate (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\middleware\\validation.ts:27:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at middleware (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-02-10T10:12:09.413Z"}
{"level":"error","message":"Error booking ticket: trx is not a function","stack":"TypeError: trx is not a function\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:18:25\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:17:39\n    at Function.<anonymous> (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\tests\\integration\\evenRoutes.test.ts:80:66)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:397:39\n    at Function.<anonymous> (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:404:13)\n    at Function.mockConstructor (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:148:19)\n    at Function.value [as transaction] (eval at _createMockFunction (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:566:31), <anonymous>:3:51)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:17:13\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at Object.bookTicket (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:16:69)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:26:39\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:41:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:37:12)\n    at bookTicket (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:23:85)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at validate (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\middleware\\validation.ts:27:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at middleware (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-02-10T10:12:09.454Z"}
{"level":"error","message":"Error booking ticket: trx is not a function","stack":"TypeError: trx is not a function\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:18:25\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:17:39\n    at Function.<anonymous> (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\tests\\integration\\evenRoutes.test.ts:97:66)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:397:39\n    at Function.<anonymous> (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:404:13)\n    at Function.mockConstructor (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:148:19)\n    at Function.value [as transaction] (eval at _createMockFunction (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:566:31), <anonymous>:3:51)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:17:13\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at Object.bookTicket (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:16:69)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:26:39\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:41:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:37:12)\n    at bookTicket (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:23:85)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at validate (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\middleware\\validation.ts:27:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at middleware (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-02-10T10:12:09.490Z"}
{"level":"error","message":"Error cancelling booking: trx is not a function","stack":"TypeError: trx is not a function\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:41:27\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:40:39\n    at Function.<anonymous> (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\tests\\integration\\evenRoutes.test.ts:120:66)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:397:39\n    at Function.<anonymous> (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:404:13)\n    at Function.mockConstructor (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:148:19)\n    at Function.value [as transaction] (eval at _createMockFunction (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:566:31), <anonymous>:3:51)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:40:13\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at Object.cancelBooking (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:39:72)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:41:39\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:41:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:37:12)\n    at cancelBooking (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:38:88)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at validate (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\middleware\\validation.ts:27:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at middleware (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-02-10T10:12:09.529Z"}
{"level":"error","message":"Error cancelling booking: trx is not a function","stack":"TypeError: trx is not a function\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:41:27\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:40:39\n    at Function.<anonymous> (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\tests\\integration\\evenRoutes.test.ts:136:66)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:397:39\n    at Function.<anonymous> (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:404:13)\n    at Function.mockConstructor (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:148:19)\n    at Function.value [as transaction] (eval at _createMockFunction (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\jest-mock\\build\\index.js:566:31), <anonymous>:3:51)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:40:13\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at Object.cancelBooking (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:39:72)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:41:39\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:41:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:37:12)\n    at cancelBooking (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:38:88)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at validate (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\middleware\\validation.ts:27:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at middleware (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-02-10T10:12:09.576Z"}
{"level":"error","message":"Error getting event status: Cannot read properties of undefined (reading 'where')","stack":"TypeError: Cannot read properties of undefined (reading 'where')\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:72:35\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at Object.getEventStatus (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:71:57)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:56:39\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:41:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:37:12)\n    at getEventStatus (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:53:89)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at validate (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\middleware\\validation.ts:27:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at middleware (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-02-10T10:12:09.644Z"}
{"level":"error","message":"Error getting event status: Cannot read properties of undefined (reading 'where')","stack":"TypeError: Cannot read properties of undefined (reading 'where')\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:72:35\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:4:12)\n    at Object.getEventStatus (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\services\\eventService.ts:71:57)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:56:39\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:41:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:37:12)\n    at getEventStatus (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\controllers\\eventController.ts:53:89)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at validate (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\src\\middleware\\validation.ts:27:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at middleware (C:\\Users\\Dell\\Desktop\\great-brands assessment\\event-ticket-booking\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-02-10T10:12:09.695Z"}
